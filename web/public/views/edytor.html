<!DOCTYPE html>
<html>
<head>
    <title>Monaco Editor with Echo</title>
    <script src="/assets/monaco/vs/loader.js"></script>
    {{template "styles" .}}
</head>
<body>

<div class="col">
    <div class="row">
        <div class="input-group mb-3">
            <input type="text" class="form-control" placeholder="Recipient's username" aria-label="Recipient's username"
                   aria-describedby="button-addon2">
            <button class="btn btn-outline-secondary" type="button" id="button-addon2">Button</button>
        </div>
    </div>
    <div class="row">
        <div class="col-6">
            <div id="container" style="height:600px;"></div>
        </div>
        <div class="col-6">
<pre id="mermaid">
            graph TD
            asd[Client qwe] -->|tcp_123| B
            B(Load Balancer)
            B --> C[Server1]
            B -->|tcp_456| D[Server2]
    </pre>

        </div>
    </div>
</div>
<script>
    const initialPipeline = '{{.InitCommand}}'

    require.config({paths: {'vs': '/assets/monaco/vs'}});

    require(['vs/editor/editor.main'], function () {
        monaco.languages.registerCompletionItemProvider('json', {
            provideCompletionItems: function (model, position) {
                const word = model.getWordUntilPosition(position);
                const range = {
                    startLineNumber: position.lineNumber,
                    endLineNumber: position.lineNumber,
                    startColumn: word.startColumn,
                    endColumn: word.endColumn
                };

                const suggestions = [
                    {
                        label: 'myKeyword1',
                        kind: monaco.languages.CompletionItemKind.Keyword,
                        insertText: '"myKeyword1"',
                        range: range
                    },
                    {
                        label: 'myKeyword2',
                        kind: monaco.languages.CompletionItemKind.Keyword,
                        insertText: '"myKeyword2"',
                        range: range
                    }
                ];
                return {suggestions: suggestions};
            }
        });

        monaco.editor.create(document.getElementById('container'), {
            value: initialPipeline,
            language: 'json'
        });

    });
</script>
{{template "scripts" .}}

</body>
</html>
